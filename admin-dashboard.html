<!doctype html>
<html class="no-js" lang="zxx">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      <title>Admin Dashboard - Travelo+ CRM</title>
      <meta name="author" content="Themeholy">
      <meta name="robots" content="NOINDEX,NOFOLLOW">
      <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
      <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicons/favicon-32x32.png">
      <link rel="preconnect" href="https://fonts.googleapis.com/">
      <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&amp;family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap" rel="stylesheet">
      <link rel="stylesheet" href="assets/css/bootstrap.min.css">
      <link rel="stylesheet" href="assets/css/fontawesome.min.css">
      <style>
         * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
         }
         body {
            font-family: 'Poppins', sans-serif;
            background: #f5f7fa;
         }
         .dashboard-header {
            background: white;
            padding: 15px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
         }
         .dashboard-header h1 {
            font-size: 24px;
            color: #333;
            margin: 0;
         }
         .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
         }
         .user-info span {
            color: #666;
         }
         .btn-logout {
            padding: 8px 20px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
         }
         .btn-logout:hover {
            background: #c82333;
         }
         .dashboard-container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
         }
         .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
         }
         .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
         }
         .stat-card h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            text-transform: uppercase;
         }
         .stat-card .number {
            font-size: 32px;
            font-weight: 700;
            color: #333;
         }
         .stat-card.blue { border-left: 4px solid #667eea; }
         .stat-card.green { border-left: 4px solid #28a745; }
         .stat-card.orange { border-left: 4px solid #fd7e14; }
         .stat-card.red { border-left: 4px solid #dc3545; }
         .enquiries-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
         }
         .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
         }
         .section-header h2 {
            font-size: 20px;
            color: #333;
         }
         .filter-buttons {
            display: flex;
            gap: 10px;
         }
         .filter-btn {
            padding: 8px 16px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
         }
         .filter-btn.active {
            background: var(--theme-color);
            color: white;
            border-color: var(--theme-color);
         }
         .search-box {
            margin-bottom: 20px;
         }
         .search-box input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
         }
         .enquiries-table {
            width: 100%;
            border-collapse: collapse;
         }
         .enquiries-table thead {
            background: #f8f9fa;
         }
         .enquiries-table th {
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #666;
            font-size: 14px;
         }
         .enquiries-table td {
            padding: 15px 12px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
         }
         .enquiries-table tr:hover {
            background: #f8f9fa;
         }
         .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
         }
         .status-new { background: #e3f2fd; color: #1976d2; }
         .status-pending { background: #fff3e0; color: #f57c00; }
         .status-contacted { background: #e8f5e9; color: #388e3c; }
         .status-closed { background: #f3e5f5; color: #7b1fa2; }
         .action-buttons {
            display: flex;
            gap: 5px;
         }
         .btn-action {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
         }
         .btn-view { background: #667eea; color: white; }
         .btn-delete { background: #dc3545; color: white; }
         .btn-view:hover { background: #5568d3; }
         .btn-delete:hover { background: #c82333; }
         .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
         }
         .modal-content {
            background: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
         }
         .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
         }
         .modal-header h3 {
            margin: 0;
         }
         .close {
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #999;
         }
         .close:hover {
            color: #333;
         }
         .detail-row {
            margin-bottom: 15px;
         }
         .detail-row label {
            font-weight: 600;
            color: #666;
            display: block;
            margin-bottom: 5px;
         }
         .detail-row p {
            color: #333;
            margin: 0;
         }
         .status-update {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
         }
         .status-update select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
         }
         .btn-update {
            width: 100%;
            padding: 12px;
            background: var(--theme-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
         }
         .btn-update:hover {
            background: #5568d3;
         }
         @media (max-width: 768px) {
            .enquiries-table {
               font-size: 12px;
            }
            .enquiries-table th,
            .enquiries-table td {
               padding: 8px 5px;
            }
         }
      </style>
   </head>
   <body>
      <div class="dashboard-header">
         <h1>ðŸ“Š CRM Dashboard</h1>
         <div class="user-info">
            <span>Welcome, <strong id="adminName">Admin</strong></span>
            <button class="btn-logout" onclick="logout()">Logout</button>
         </div>
      </div>

      <div class="dashboard-container">
         <!-- Statistics Cards -->
         <div class="stats-grid">
            <div class="stat-card blue">
               <h3>Total Enquiries</h3>
               <div class="number" id="totalEnquiries">0</div>
            </div>
            <div class="stat-card green">
               <h3>New Enquiries</h3>
               <div class="number" id="newEnquiries">0</div>
            </div>
            <div class="stat-card orange">
               <h3>Pending</h3>
               <div class="number" id="pendingEnquiries">0</div>
            </div>
            <div class="stat-card red">
               <h3>Contacted</h3>
               <div class="number" id="contactedEnquiries">0</div>
            </div>
         </div>

         <!-- Enquiries Section -->
         <div class="enquiries-section">
            <div class="section-header">
               <h2>All Enquiries</h2>
               <div class="filter-buttons">
                  <button class="filter-btn active" onclick="filterEnquiries('all')">All</button>
                  <button class="filter-btn" onclick="filterEnquiries('new')">New</button>
                  <button class="filter-btn" onclick="filterEnquiries('pending')">Pending</button>
                  <button class="filter-btn" onclick="filterEnquiries('contacted')">Contacted</button>
               </div>
            </div>

            <div class="search-box">
               <input type="text" id="searchInput" placeholder="Search by name, email, or phone..." onkeyup="searchEnquiries()">
            </div>

            <div style="overflow-x: auto;">
               <table class="enquiries-table">
                  <thead>
                     <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Service</th>
                        <th>Date</th>
                        <th>Status</th>
                        <th>Actions</th>
                     </tr>
                  </thead>
                  <tbody id="enquiriesTableBody">
                     <!-- Enquiries will be loaded here -->
                  </tbody>
               </table>
            </div>
         </div>
      </div>

      <!-- View Enquiry Modal -->
      <div id="viewModal" class="modal">
         <div class="modal-content">
            <div class="modal-header">
               <h3>Enquiry Details</h3>
               <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div id="modalBody">
               <!-- Details will be loaded here -->
            </div>
         </div>
      </div>

      <script>
         // Check if admin is logged in
         if (!localStorage.getItem('adminLoggedIn')) {
            window.location.href = 'admin-login.html';
         }

         // Set admin name
         document.getElementById('adminName').textContent = localStorage.getItem('adminUsername') || 'Admin';

         // Sample enquiries data (In production, this would come from a database)
         let enquiries = [
            {
               id: 1,
               name: 'John Doe',
               email: 'john@example.com',
               phone: '+1234567890',
               service: 'Social Media Management',
               message: 'I need help with managing my social media accounts.',
               date: '2025-01-25',
               status: 'new'
            },
            {
               id: 2,
               name: 'Jane Smith',
               email: 'jane@example.com',
               phone: '+1234567891',
               service: 'Creative Designing',
               message: 'Looking for logo design services.',
               date: '2025-01-24',
               status: 'pending'
            },
            {
               id: 3,
               name: 'Mike Johnson',
               email: 'mike@example.com',
               phone: '+1234567892',
               service: 'Content Writing',
               message: 'Need content writers for my blog.',
               date: '2025-01-23',
               status: 'contacted'
            }
         ];

         // Load enquiries from localStorage if available
         const storedEnquiries = localStorage.getItem('enquiries');
         if (storedEnquiries) {
            enquiries = JSON.parse(storedEnquiries);
         } else {
            localStorage.setItem('enquiries', JSON.stringify(enquiries));
         }

         let currentFilter = 'all';

         function updateStats() {
            document.getElementById('totalEnquiries').textContent = enquiries.length;
            document.getElementById('newEnquiries').textContent = enquiries.filter(e => e.status === 'new').length;
            document.getElementById('pendingEnquiries').textContent = enquiries.filter(e => e.status === 'pending').length;
            document.getElementById('contactedEnquiries').textContent = enquiries.filter(e => e.status === 'contacted').length;
         }

         function renderEnquiries(filter = 'all') {
            const tbody = document.getElementById('enquiriesTableBody');
            let filteredEnquiries = enquiries;

            if (filter !== 'all') {
               filteredEnquiries = enquiries.filter(e => e.status === filter);
            }

            tbody.innerHTML = '';

            filteredEnquiries.forEach(enquiry => {
               const row = document.createElement('tr');
               row.innerHTML = `
                  <td>#${enquiry.id}</td>
                  <td>${enquiry.name}</td>
                  <td>${enquiry.email}</td>
                  <td>${enquiry.phone}</td>
                  <td>${enquiry.service}</td>
                  <td>${enquiry.date}</td>
                  <td><span class="status-badge status-${enquiry.status}">${enquiry.status.toUpperCase()}</span></td>
                  <td class="action-buttons">
                     <button class="btn-action btn-view" onclick="viewEnquiry(${enquiry.id})">View</button>
                     <button class="btn-action btn-delete" onclick="deleteEnquiry(${enquiry.id})">Delete</button>
                  </td>
               `;
               tbody.appendChild(row);
            });
         }

         function filterEnquiries(filter) {
            currentFilter = filter;
            
            // Update active button
            document.querySelectorAll('.filter-btn').forEach(btn => {
               btn.classList.remove('active');
            });
            event.target.classList.add('active');

            renderEnquiries(filter);
         }

         function searchEnquiries() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const tbody = document.getElementById('enquiriesTableBody');
            
            let filteredEnquiries = enquiries;
            if (currentFilter !== 'all') {
               filteredEnquiries = enquiries.filter(e => e.status === currentFilter);
            }

            if (searchTerm) {
               filteredEnquiries = filteredEnquiries.filter(e => 
                  e.name.toLowerCase().includes(searchTerm) ||
                  e.email.toLowerCase().includes(searchTerm) ||
                  e.phone.includes(searchTerm)
               );
            }

            tbody.innerHTML = '';
            filteredEnquiries.forEach(enquiry => {
               const row = document.createElement('tr');
               row.innerHTML = `
                  <td>#${enquiry.id}</td>
                  <td>${enquiry.name}</td>
                  <td>${enquiry.email}</td>
                  <td>${enquiry.phone}</td>
                  <td>${enquiry.service}</td>
                  <td>${enquiry.date}</td>
                  <td><span class="status-badge status-${enquiry.status}">${enquiry.status.toUpperCase()}</span></td>
                  <td class="action-buttons">
                     <button class="btn-action btn-view" onclick="viewEnquiry(${enquiry.id})">View</button>
                     <button class="btn-action btn-delete" onclick="deleteEnquiry(${enquiry.id})">Delete</button>
                  </td>
               `;
               tbody.appendChild(row);
            });
         }

         function viewEnquiry(id) {
            const enquiry = enquiries.find(e => e.id === id);
            if (!enquiry) return;

            const modalBody = document.getElementById('modalBody');
            modalBody.innerHTML = `
               <div class="detail-row">
                  <label>Enquiry ID:</label>
                  <p>#${enquiry.id}</p>
               </div>
               <div class="detail-row">
                  <label>Name:</label>
                  <p>${enquiry.name}</p>
               </div>
               <div class="detail-row">
                  <label>Email:</label>
                  <p>${enquiry.email}</p>
               </div>
               <div class="detail-row">
                  <label>Phone:</label>
                  <p>${enquiry.phone}</p>
               </div>
               <div class="detail-row">
                  <label>Service:</label>
                  <p>${enquiry.service}</p>
               </div>
               <div class="detail-row">
                  <label>Message:</label>
                  <p>${enquiry.message}</p>
               </div>
               <div class="detail-row">
                  <label>Date:</label>
                  <p>${enquiry.date}</p>
               </div>
               <div class="detail-row">
                  <label>Current Status:</label>
                  <p><span class="status-badge status-${enquiry.status}">${enquiry.status.toUpperCase()}</span></p>
               </div>
               <div class="status-update">
                  <label>Update Status:</label>
                  <select id="statusSelect">
                     <option value="new" ${enquiry.status === 'new' ? 'selected' : ''}>New</option>
                     <option value="pending" ${enquiry.status === 'pending' ? 'selected' : ''}>Pending</option>
                     <option value="contacted" ${enquiry.status === 'contacted' ? 'selected' : ''}>Contacted</option>
                     <option value="closed" ${enquiry.status === 'closed' ? 'selected' : ''}>Closed</option>
                  </select>
                  <button class="btn-update" onclick="updateStatus(${enquiry.id})">Update Status</button>
               </div>
            `;

            document.getElementById('viewModal').style.display = 'block';
         }

         function updateStatus(id) {
            const newStatus = document.getElementById('statusSelect').value;
            const enquiryIndex = enquiries.findIndex(e => e.id === id);
            
            if (enquiryIndex !== -1) {
               enquiries[enquiryIndex].status = newStatus;
               localStorage.setItem('enquiries', JSON.stringify(enquiries));
               
               updateStats();
               renderEnquiries(currentFilter);
               closeModal();
               
               alert('Status updated successfully!');
            }
         }

         function deleteEnquiry(id) {
            if (confirm('Are you sure you want to delete this enquiry?')) {
               enquiries = enquiries.filter(e => e.id !== id);
               localStorage.setItem('enquiries', JSON.stringify(enquiries));
               
               updateStats();
               renderEnquiries(currentFilter);
               
               alert('Enquiry deleted successfully!');
            }
         }

         function closeModal() {
            document.getElementById('viewModal').style.display = 'none';
         }

         function logout() {
            if (confirm('Are you sure you want to logout?')) {
               localStorage.removeItem('adminLoggedIn');
               localStorage.removeItem('adminUsername');
               window.location.href = 'admin-login.html';
            }
         }

         // Close modal when clicking outside
         window.onclick = function(event) {
            const modal = document.getElementById('viewModal');
            if (event.target == modal) {
               closeModal();
            }
         }

         // Initialize dashboard
         updateStats();
         renderEnquiries();
      </script>
   </body>
</html>
